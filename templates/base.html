<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}{{ SITE_NAME }}{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>

<body class="{% if request.path == '/' %}page-home{% else %}page-sub{% endif %}">

  <header class="sticky-top">
    <nav class="navbar navbar-expand-lg navbar-light navbar-transparent">
      <div class="container">
        <a class="navbar-brand fw-bold" href="/">{{ SITE_NAME }}</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#topNav"
          aria-controls="topNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="topNav">

          <!-- âœ… ìƒë‹¨ ë©”ë‰´ (PC/ëª¨ë°”ì¼ ê³µìš©: ULì€ ê·¸ëŒ€ë¡œ ìœ ì§€) -->
          <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2 nav-mega">
            {% for menu in NAV %}
            <li class="nav-item nav-mega-item">

              <!-- PC: ê¸°ì¡´ mega íŠ¸ë¦¬ê±° ìœ ì§€ / Mobile: panel ë‚´ìš© ìŠ¤ì™‘ íŠ¸ë¦¬ê±°ë¡œë„ ì‚¬ìš© -->
              <a class="nav-link fw-semibold nav-mega-link" href="#" data-mega-key="{{ loop.index0 }}"
                data-mobile-acc-btn="1">
                {{ menu["title"] }}
              </a>

              <!-- âœ… MOBILE: í•˜ìœ„ ë©”ë‰´ "ì†ŒìŠ¤" (ìˆ¨ê¹€, panelì— ë³µì‚¬í•´ì„œ ì‚¬ìš©) -->
              <div class="d-lg-none mobile-mega-src" data-mega-src="{{ loop.index0 }}" hidden>
                {% for item in menu["items"] %}
                <a class="mobile-mega-link" href="{{ url_for('page', slug=item['slug']) }}">
                  {{ item['label'] }}
                </a>
                {% endfor %}
              </div>

            </li>
            {% endfor %}

            <li class="nav-item ms-lg-2">
              <!-- âœ… ì˜ˆì•½í•˜ê¸° (ëª¨ë°”ì¼ì—ì„œ í…ìŠ¤íŠ¸ ë©”ë‰´ì²˜ëŸ¼ ìŠ¤íƒ€ì¼ë§) -->
              <a class="btn btn-primary btn-sm px-3 nav-reserve" href="{{ url_for('page', slug='reserve/calendar') }}">
                ì˜ˆì•½í•˜ê¸°
              </a>
            </li>

            <!-- âœ… ëª¨ë°”ì¼ ì „ìš© ë¡œê·¸ì¸/íšŒì›ê°€ì…: ì™¼ìª½ í•˜ë‹¨ sticky ê³ ì • -->
            <li class="nav-item d-lg-none mt-3 pt-3 border-top mobile-auth">
              {% if IS_ADMIN or DEMO_USER %}
              <a class="d-block py-2" href="{{ url_for('logout') }}">ë¡œê·¸ì•„ì›ƒ</a>
              {% else %}
              <a class="d-block py-2" href="{{ url_for('login', next=request.full_path) }}">ë¡œê·¸ì¸</a>
              <a class="d-block py-2" href="{{ url_for('signup') }}">íšŒì›ê°€ì…</a>
              {% endif %}
            </li>
          </ul>

          <!-- âœ… MOBILE: ê°€ìš´ë° 20% ì˜ì—­(ì—¬ë°±/ê°€ì´ë“œ) -->
          <div class="d-lg-none mnav-divider" aria-hidden="true"></div>

          <!-- âœ… MOBILE: ì˜¤ë¥¸ìª½ 40% "ê³ ì • ë©”ê°€ íŒ¨ë„(1ê°œ)" -->
          <div class="d-lg-none mnav-panel" id="mobileMegaPanel" aria-hidden="true">
            <div class="mnav-panel-inner">
              <div class="mnav-panel-head" id="mnavPanelHead">ë©”ë‰´ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
              <div class="mnav-panel-body" id="mnavPanelBody">
                <div class="mnav-panel-placeholder">ì™¼ìª½ì—ì„œ ìƒìœ„ ë©”ë‰´ë¥¼ ëˆ„ë¥´ë©´ í•˜ìœ„ ë©”ë‰´ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
              </div>
            </div>
          </div>

          <!-- âœ… PC ë©”ê°€ ë©”ë‰´ (ê¸°ì¡´ ìœ ì§€) -->
          <div class="mega-global d-none d-lg-block" aria-hidden="true">
            <div class="mega-global-inner">
              <div class="container mega-rail">
                {% for menu in NAV %}
                <div class="mega-col" data-mega-col="{{ loop.index0 }}">
                  <div class="mega-col-title">{{ menu["title"] }}</div>
                  <div class="mega-col-list">
                    {% for item in menu["items"] %}
                    <a class="mega-col-link" href="{{ url_for('page', slug=item['slug']) }}">{{ item['label'] }}</a>
                    {% endfor %}
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>

        </div><!-- /.collapse -->

      </div><!-- /.container -->

      <!-- âœ… PC ì „ìš© ë¡œê·¸ì¸/íšŒì›ê°€ì… (ê¸°ì¡´ ìœ ì§€) -->
      <div class="nav-auth-dock d-none d-lg-flex">
        {% if IS_ADMIN or DEMO_USER %}
        <a class="nav-auth-link" href="{{ url_for('logout') }}">ë¡œê·¸ì•„ì›ƒ</a>
        {% else %}
        <a class="nav-auth-link" href="{{ url_for('login', next=request.full_path) }}">ë¡œê·¸ì¸</a>
        <a class="nav-auth-link" href="{{ url_for('signup') }}">íšŒì›ê°€ì…</a>
        {% endif %}
      </div>

    </nav>
  </header>


  <main>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container mt-3">
      {% for category, message in messages %}
      <div class="alert alert-{{ category }} mb-2" role="alert">
        {{ message }}
      </div>
      {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    {# âœ… ì„œë¸Œí˜ì´ì§€ ê³µí†µ ìƒë‹¨ì°½ (ë ˆí¼ëŸ°ìŠ¤ ìŠ¤íƒ€ì¼) #}
    {% if request.path != '/' and meta and not (HIDE_SUBHERO | default(false)) %}
    <section class="sub-hero fullbleed {% if not HERO_IMG %}no-bg{% endif %}">
      <div class="sub-hero-bg" style="background-image:url('{{ url_for('static', filename='img/hero_sub.png') }}');">
      </div>
      <div class="sub-hero-dim"></div>

      <div class="sub-hero-inner container">
        <div class="sub-hero-content">
          <h1 class="sub-hero-title">{{ meta.title }}</h1>

          <div class="sub-hero-bc">
            <a class="bc-home" href="/" aria-label="í™ˆ">
              <!-- âœ… í™ˆ ì•„ì´ì½˜ (í¬ê¸° CSSë¡œ ì œì–´) -->
              <svg class="bc-home-ico" viewBox="0 0 24 24" aria-hidden="true">
                <path fill="currentColor"
                  d="M12 3.2 3 10.5v10.3h6.3v-6.4h5.4v6.4H21V10.5L12 3.2Zm7.2 15.8h-2.7v-6.4H7.5v6.4H4.8v-7.6L12 5.9l7.2 5.5v7.6Z" />
              </svg>
            </a>
            {% if ACTIVE_MENU %}
            <span class="bc-sep">&rsaquo;</span>
            <span class="bc-item">{{ ACTIVE_MENU["title"] }}</span>
            {% endif %}
            <span class="bc-sep">&rsaquo;</span>
            <span class="bc-item is-current">{{ meta.title }}</span>
          </div>
        </div>
      </div>
    </section>

    {# âœ… ì„œë¸Œí˜ì´ì§€ íƒ­ë°”(í•´ë‹¹ ìƒìœ„ë©”ë‰´ í•˜ìœ„ë©”ë‰´ ìë™) #}
    {% if ACTIVE_MENU %}
    {% set _subcols = (ACTIVE_MENU['items']|length) if ACTIVE_MENU else 0 %}
    <section class="subnav fullbleed {% if _subcols and _subcols <= 5 %}subnav-fit{% endif %}"
      style="--subtab-cols: {{ _subcols }};">
      <div class="full-content">
        <div class="subnav-inner">
          {% for it in ACTIVE_MENU["items"] %}
          <a class="subnav-link {% if it.slug == ACTIVE_SLUG %}is-active{% endif %}"
            href="{{ url_for('page', slug=it.slug) }}">
            {{ it.label }}
          </a>
          {% endfor %}
        </div>
      </div>
    </section>
    {% endif %}
    {% endif %}

    {% block content %}{% endblock %}
  </main>

  <!-- Floating Quick Menu (ì˜ìƒ ë ˆí¼ëŸ°ìŠ¤ ì˜¤ë¥¸ìª½ ê³ ì • ë©”ë‰´) -->
  <div class="floating-quick d-none d-lg-flex">
    <a class="fq-item" href="{{ url_for('page', slug='guide/directions') }}">
      <div class="fq-ico">ğŸ“</div>
      <div class="fq-txt">ì˜¤ì‹œëŠ”ê¸¸</div>
    </a>
    <a class="fq-item" href="{{ url_for('page', slug='reserve/calendar') }}">
      <div class="fq-ico">ğŸ“…</div>
      <div class="fq-txt">ë‹¬ë ¥ì˜ˆì•½</div>
    </a>
    <a class="fq-item" href="{{ url_for('page', slug='reserve/consult') }}">
      <div class="fq-ico">ğŸ’¬</div>
      <div class="fq-txt">ì˜¨ë¼ì¸ìƒë‹´</div>
    </a>
  </div>

  <footer class="border-top mt-5">
    <div class="container py-5">
      <div class="row g-4">
        <div class="col-lg-4">
          <div class="fw-bold mb-2">{{ SITE_NAME }}</div>
          <div class="text-muted small">
            ì„œìš¸íŠ¹ë³„ì‹œ â—‹â—‹êµ¬ â—‹â—‹ë¡œ 123 (ì˜ˆì‹œ)<br>
            ëŒ€í‘œë²ˆí˜¸ 02-000-0000 Â· ì§„ë£Œë¬¸ì˜ 010-0000-0000
          </div>
        </div>
        <div class="col-lg-4">
          <div class="fw-semibold mb-2">ì§„ë£Œì‹œê°„</div>
          <div class="text-muted small">
            í‰ì¼ 09:30 - 18:30<br>
            í† ìš”ì¼ 09:30 - 14:00<br>
            ì ì‹¬ 13:00 - 14:00 (í† ìš”ì¼ ì œì™¸)<br>
            ì¼/ê³µíœ´ì¼ íœ´ì§„
          </div>
        </div>
        <div class="col-lg-4">
          <div class="fw-semibold mb-2">ë°”ë¡œê°€ê¸°</div>
          <div class="d-flex flex-wrap gap-2">
            <a class="btn btn-light btn-sm" href="{{ url_for('page', slug='guide/directions') }}">ì˜¤ì‹œëŠ”ê¸¸</a>
            <a class="btn btn-light btn-sm" href="{{ url_for('page', slug='community/notice') }}">ê³µì§€ì‚¬í•­</a>
            <a class="btn btn-light btn-sm" href="{{ url_for('page', slug='intro/staff') }}">ì˜ë£Œì§„ì†Œê°œ</a>
          </div>
        </div>
      </div>

      <div class="text-muted small mt-4">
        Â© {{ SITE_NAME }}. All rights reserved.
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>
