{% extends "base.html" %}
{% block title %}{{ SITE_NAME }} | 메인{% endblock %}

{% block content %}

<!-- HERO (진짜 풀블리드 + 아래만 라운드) -->
<section class="hero-wrap">
  <div id="heroCarousel" class="carousel slide hero-card" data-bs-ride="carousel" data-bs-pause="false">
    <div class="carousel-inner">

      <div class="carousel-item active">
        <div class="hero-slide" style="background-image:url('{{ url_for('static', filename='img/hero1.webp') }}')">
          <div class="hero-overlay"></div>
          <div class="hero-content">
            <div class="hero-badge">PORTFOLIO HOSPITAL</div>
            <h1 class="hero-title hero-title--single">정확한 진단<br class="m-br"> 편안한 치료</h1>
            <p class="hero-lead">환자 중심 진료와 체계적인 프로세스로<br class="m-br"> 신뢰를 드립니다.</p>
            <div class="hero-cta">
              <a class="hero-link hero-link--primary" href="{{ url_for('page', slug='reserve/calendar') }}">달력예약</a>
              <a class="hero-link" href="{{ url_for('page', slug='guide/directions') }}">오시는길</a>
            </div>
          </div>
        </div>
      </div>

      <div class="carousel-item">
        <div class="hero-slide" style="background-image:url('{{ url_for('static', filename='img/hero2.webp') }}')">
          <div class="hero-overlay"></div>
          <div class="hero-content">
            <div class="hero-badge">DENTAL CARE</div>
            <h2 class="hero-title hero-title--single">불필요한 치료 없이<br class="m-br"> 꼭 필요한 치료만</h2>
            <p class="hero-lead">상담 > 정밀진단 > 치료 > 사후관리까지<br class="m-br"> 투명하게 안내합니다.</p>
            <div class="hero-cta">
              <a class="hero-link hero-link--primary" href="{{ url_for('page', slug='reserve/consult') }}">온라인 상담</a>
              <a class="hero-link" href="{{ url_for('page', slug='intro/staff') }}">의료진 소개</a>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="hero-controls">
      <button class="btn hero-nav" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">‹</button>
      <div class="hero-indicators">
        <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
        <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
      </div>
      <button class="btn hero-nav" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">›</button>
    </div>
  </div>
</section>


<!-- 한 줄 카피 -->
<section class="statement fullbleed sec reveal">
  <div class="full-content">
    <h2 class="statement-title">환자마다 다른 고민,<br class="d-md-none"> 맞춤 솔루션으로 해결합니다.</h2>
    <p class="statement-sub">정확한 진단과 섬세한 치료로 자연치아를 지켜드립니다.</p>
  </div>
</section>


<!-- 치료 -->
<section class="treat2-wrap sec reveal">
  <div class="container">
    <div class="treat2-head">
      <div class="section-head">
        <h2 class="sec-title">치료</h2>
        <p class="sec-sub">포트폴리오병원의 대표 진료 과목을 확인하세요.</p>
      </div>

      <ul class="treat2-tabs" id="treatTabs">
        <li><button class="treat2-tab is-active" data-key="ortho" type="button">치아교정</button></li>
        <li><button class="treat2-tab" data-key="implant" type="button">임플란트</button></li>
        <li><button class="treat2-tab" data-key="neuro" type="button">신경치료</button></li>
        <li><button class="treat2-tab" data-key="endo" type="button">충치치료</button></li>
        <li><button class="treat2-tab" data-key="wisdom" type="button">사랑니발치</button></li>
      </ul>
    </div>
  </div>

  <div class="treat2-full">
    <div class="treat2-viewport" id="treatViewport">
      <div class="treat2-rail" id="treatRail">

        <button class="treat2-card is-active" data-key="ortho" type="button">
          <div class="t2-bg" style="background-image:url('{{ url_for('static', filename='img/treat1.webp') }}')"></div>
          <div class="t2-dim"></div>
          <div class="t2-content">
            <div class="t2-title">치아교정</div>
            <div class="t2-desc">기능과 심미를 고려한 맞춤<br class="m-break"> 교정 솔루션을 제공합니다.</div>
            <div class="t2-tags">
              <span>#맞춤진료</span><span>#정밀진단</span><span>#사후관리</span>
            </div>
          </div>
        </button>

        <button class="treat2-card" data-key="implant" type="button">
          <div class="t2-bg" style="background-image:url('{{ url_for('static', filename='img/treat2.webp') }}')"></div>
          <div class="t2-dim"></div>
          <div class="t2-content">
            <div class="t2-title">임플란트</div>
            <div class="t2-desc">정밀 진단 기반의 안전한<br class="m-break"> 임플란트 치료를 진행합니다.</div>
            <div class="t2-tags">
              <span>#안전시술</span><span>#사후관리</span>
            </div>
          </div>
        </button>

        <button class="treat2-card" data-key="neuro" type="button">
          <div class="t2-bg" style="background-image:url('{{ url_for('static', filename='img/treat3.webp') }}')"></div>
          <div class="t2-dim"></div>
          <div class="t2-content">
            <div class="t2-title">신경치료</div>
            <div class="t2-desc">통증을 줄이고 치아를 최대한<br class="m-break"> 보존하는 치료를 지향합니다.</div>
            <div class="t2-tags">
              <span>#보존치료</span><span>#통증완화</span>
            </div>
          </div>
        </button>

        <button class="treat2-card" data-key="endo" type="button">
          <div class="t2-bg" style="background-image:url('{{ url_for('static', filename='img/treat4.webp') }}')"></div>
          <div class="t2-dim"></div>
          <div class="t2-content">
            <div class="t2-title">충치치료</div>
            <div class="t2-desc">작은 충치부터 난이도 높은 케이스까지<br class="m-break"> 단계적으로 치료합니다.</div>
            <div class="t2-tags">
              <span>#정밀치료</span><span>#보존</span>
            </div>
          </div>
        </button>

        <button class="treat2-card" data-key="wisdom" type="button">
          <div class="t2-bg" style="background-image:url('{{ url_for('static', filename='img/treat5.webp') }}')"></div>
          <div class="t2-dim"></div>
          <div class="t2-content">
            <div class="t2-title">사랑니발치</div>
            <div class="t2-desc">난이도 높은 케이스도<br class="m-break"> 체계적으로 진행합니다.</div>
            <div class="t2-tags">
              <span>#정밀발치</span><span>#난발치</span><span>#안전</span>
            </div>
          </div>
        </button>

      </div>
    </div>
  </div>
</section>


<!-- 의료진 -->
<section class="doctor3-wrap doctor3-fullbleed sec reveal" id="doctorSection">
  <div class="doctor3-inner">

    <div class="doctor3-left">
      <div class="doctor3-kicker">DOCTOR</div>
      <h3 class="doctor3-title">정확한 진단,<br>믿을 수 있는 의료진</h3>
      <p class="doctor3-sub">전문성과 윤리의식이 함께하는 진료를 약속드립니다.</p>

      <div class="doctor3-info is-active" data-key="doc1">
        <div class="doctor3-role">대표원장</div>
        <div class="doctor3-name">김포트 원장</div>
        <div class="doctor3-dept">통합치의학과 · 교정/임플란트</div>
      </div>

      <div class="doctor3-info" data-key="doc2">
        <div class="doctor3-role">원장</div>
        <div class="doctor3-name">김의사 원장</div>
        <div class="doctor3-dept">통합치의학과 · 보철/보존</div>
      </div>

      <div class="doctor3-cta">
        <a class="btn btn-outline-secondary" href="{{ url_for('page', slug='intro/staff') }}">자세히 보기</a>
        <a class="btn btn-primary" href="{{ url_for('page', slug='reserve/calendar') }}">예약하기</a>
      </div>
    </div>

    <div class="doctor3-right">
      <div class="doctor3-viewport" id="doctorViewport">
        <div class="doctor3-track" id="doctorTrack">

          <span class="doctor3-spacer" aria-hidden="true"></span>

          <button class="doctor3-slide is-active" type="button" data-key="doc1" aria-label="김포트 원장">
            <img src="{{ url_for('static', filename='img/doctor1.webp') }}" alt="대표원장 김포트" loading="lazy" decoding="async">
          </button>

          <button class="doctor3-slide" type="button" data-key="doc2" aria-label="김의사 원장">
            <img src="{{ url_for('static', filename='img/doctor2.webp') }}" alt="원장 김의사" loading="lazy" decoding="async">
          </button>

          <span class="doctor3-spacer" aria-hidden="true"></span>

        </div>
      </div>
    </div>
  </div>
</section>


<!-- 시설 -->
<!-- 시설 -->
<section class="facility-wrap fullbleed sec reveal">
  <div class="full-content">

    <div class="facility-head reveal">
      <div>
        <h3 class="sec-title">시설 안내</h3>
        <p class="sec-sub">따뜻함과 편안함이 머무는 진료 공간을 제공합니다.</p>
      </div>
    </div>

    <!-- ✅ 3장 고정(캐러셀 제거) -->
    <div class="facility-grid reveal-stagger">
      <div class="row g-3">
        <div class="col-12 col-md-4">
          <div class="fac-img">
            <img src="{{ url_for('static', filename='img/facility1.webp') }}" alt="시설 사진 1" loading="lazy" decoding="async">
          </div>
        </div>

        <div class="col-12 col-md-4">
          <div class="fac-img">
            <img src="{{ url_for('static', filename='img/facility2.webp') }}" alt="시설 사진 2" loading="lazy" decoding="async">
          </div>
        </div>

        <div class="col-12 col-md-4">
          <div class="fac-img">
            <img src="{{ url_for('static', filename='img/facility3.webp') }}" alt="시설 사진 3" loading="lazy" decoding="async">
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- 병원 소식 -->
<section class="news-wrap fullbleed sec reveal">
  <div class="full-content">
    <div class="news-head reveal">
      <h3 class="sec-title text-center">포트폴리오병원의<br class="d-md-none"> 새로운 소식을 만나보세요.</h3>
      <p class="sec-sub text-center">공지사항과 병원소식을 한 번에 확인하세요.</p>
    </div>

    <ul class="nav news-tabs justify-content-center reveal">
      <li class="nav-item">
        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#n1" type="button">공지사항</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#n2" type="button">병원소식</button>
      </li>
    </ul>

    <div class="tab-content mt-4 reveal-stagger">
      <!-- 공지사항 (이미지 없이 텍스트 리스트) -->
      <div class="tab-pane fade show active" id="n1">
        <div class="news-center">
          <div class="news-list reveal-stagger">

            {% if notice_preview and notice_preview|length > 0 %}
              {% for p in notice_preview %}
              <a class="news-item" href="/pages/community/notice/{{ p['id'] }}">
                <div class="news-item-title">{{ p["title"] }}</div>
                <div class="news-item-meta">
                  <span class="news-item-tag">공지</span>
                  <span class="news-item-date">{{ (p["created_at"] or "")[:10] | replace("-", ".") }}</span>
                </div>
              </a>
              {% endfor %}
            {% else %}
              <div class="news-item" style="pointer-events:none;">
                <div class="news-item-title">등록된 공지사항이 없습니다.</div>
                <div class="news-item-meta">
                  <span class="news-item-tag">공지</span>
                  <span class="news-item-date"></span>
                </div>
              </div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- 병원소식 -->
      <div class="tab-pane fade" id="n2">
        <div class="news-center">
          <div class="row g-3 reveal-stagger">

            {% if news_preview and news_preview|length > 0 %}
              {% for p in news_preview %}
              <div class="col-12 col-md-auto d-flex">
                <a class="news-card" href="/pages/community/news/{{ p['id'] }}">
                  <div class="news-thumb"
                    style="background-image:url('{{ p.get('image_url') or url_for('static', filename='img/news1.webp') }}')"></div>
                  <div class="news-body">
                    <div class="news-title">{{ p["title"] }}</div>
                    <div class="news-date">{{ (p["created_at"] or "")[:10] | replace("-", ".") }}</div>
                  </div>
                </a>
              </div>
              {% endfor %}
            {% else %}
              <div class="col-12">
                <div class="news-card" style="pointer-events:none;">
                  <div class="news-thumb" style="background:#f3f5f8;"></div>
                  <div class="news-body">
                    <div class="news-title">등록된 병원소식이 없습니다.</div>
                    <div class="news-date"></div>
                  </div>
                </div>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- FAQ -->
<section class="faq-wrap sec reveal">
  <div class="container">
    <h3 class="sec-title text-center">자주 묻는 질문</h3>

    <div class="accordion faq-acc mx-auto" id="faqAcc">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
            예약 없이 방문해도 되나요?
          </button>
        </h2>
        <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAcc">
          <div class="accordion-body">
            원활한 진료를 위해 예약을 권장합니다. 당일 접수도 가능하며 대기 시간이 발생할 수 있습니다.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
            임플란트 상담은 얼마나 걸리나요?
          </button>
        </h2>
        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
          <div class="accordion-body">
            기본 상담은 15~30분 내외이며, 검사 항목에 따라 달라질 수 있습니다.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
            교정 치료 기간은 어느 정도인가요?
          </button>
        </h2>
        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
          <div class="accordion-body">
            개인 상태에 따라 다르며 정밀 진단 후 예상 기간을 안내드립니다.
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
{% endblock %}
